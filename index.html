<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mirosław Migacz">
<meta name="dcterms.date" content="2025-09-23">

<title>EFGS 2025 Python Workshop</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="index_files/libs/quarto-contrib/bootstrap-icons-1.13.1/bootstrap-icons.css" rel="stylesheet">


</head>

<body class="quarto-light">

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">EFGS 2025 Python Workshop</h1>
            <p class="subtitle lead">by Statistics Poland @ European Forum for Geography and Statistics, Oslo, Norway</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Mirosław Migacz </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 23, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link active" data-scroll-target="#getting-started"><span class="header-section-number">1</span> Getting started</a>
  <ul class="collapse">
  <li><a href="#recommended-installation-method" id="toc-recommended-installation-method" class="nav-link" data-scroll-target="#recommended-installation-method"><i class="bi-download " style="color: blue;" role="img" aria-hidden="true"></i> Recommended Installation Method</a></li>
  <li><a href="#why-the-long-term-release" id="toc-why-the-long-term-release" class="nav-link" data-scroll-target="#why-the-long-term-release"><i class="bi-shield-fill-check " style="color: green;" role="img" aria-hidden="true"></i> Why the Long Term Release?</a></li>
  <li><a href="#if-you-need-more" id="toc-if-you-need-more" class="nav-link" data-scroll-target="#if-you-need-more"><i class="bi-list-stars " style="color: yellow;" role="img" aria-hidden="true"></i> If you need more…</a></li>
  <li><a href="#launch-qgis" id="toc-launch-qgis" class="nav-link" data-scroll-target="#launch-qgis"><i class="bi-rocket-takeoff " style="color: red;" role="img" aria-hidden="true"></i> Launch QGIS</a></li>
  <li><a href="#open-the-python-console" id="toc-open-the-python-console" class="nav-link" data-scroll-target="#open-the-python-console"><i class="bi-terminal " style="color: grey;" role="img" aria-hidden="true"></i> Open the Python Console</a></li>
  <li><a href="#install-geopandas-using-pip" id="toc-install-geopandas-using-pip" class="nav-link" data-scroll-target="#install-geopandas-using-pip"><i class="bi-terminal-plus " style="color: grey;" role="img" aria-hidden="true"></i> Install GeoPandas using <code>pip</code></a></li>
  </ul></li>
  <li><a href="#geopandas---basics" id="toc-geopandas---basics" class="nav-link" data-scroll-target="#geopandas---basics"><span class="header-section-number">2</span> GeoPandas - basics</a>
  <ul class="collapse">
  <li><a href="#qgis-python-editor" id="toc-qgis-python-editor" class="nav-link" data-scroll-target="#qgis-python-editor"><i class="bi-pencil-square " style="color: grey;" role="img" aria-hidden="true"></i> QGIS Python Editor</a></li>
  <li><a href="#reading-datasets-with-geopandas" id="toc-reading-datasets-with-geopandas" class="nav-link" data-scroll-target="#reading-datasets-with-geopandas"><i class="bi-file-arrow-up " style="color: darkblue;" role="img" aria-hidden="true"></i> Reading datasets with GeoPandas</a>
  <ul class="collapse">
  <li><a href="#start-with-importing-geopandas" id="toc-start-with-importing-geopandas" class="nav-link" data-scroll-target="#start-with-importing-geopandas">1. Start with importing GeoPandas</a></li>
  <li><a href="#specify-the-path-to-the-shapefile" id="toc-specify-the-path-to-the-shapefile" class="nav-link" data-scroll-target="#specify-the-path-to-the-shapefile">2. Specify the path to the Shapefile</a></li>
  <li><a href="#read-the-shapefile-into-a-geodataframe" id="toc-read-the-shapefile-into-a-geodataframe" class="nav-link" data-scroll-target="#read-the-shapefile-into-a-geodataframe">3. Read the Shapefile into a GeoDataFrame</a></li>
  <li><a href="#display-first-few-rows" id="toc-display-first-few-rows" class="nav-link" data-scroll-target="#display-first-few-rows">4. Display first few rows</a></li>
  </ul></li>
  <li><a href="#introducing-the-geopackage" id="toc-introducing-the-geopackage" class="nav-link" data-scroll-target="#introducing-the-geopackage"><i class="bi-database " style="color: brown;" role="img" aria-hidden="true"></i> Introducing the GeoPackage</a></li>
  <li><a href="#shapefiles-vs-geopackages" id="toc-shapefiles-vs-geopackages" class="nav-link" data-scroll-target="#shapefiles-vs-geopackages"><i class="bi-plus-slash-minus " style="color: red;" role="img" aria-hidden="true"></i> Shapefiles vs GeoPackages</a></li>
  <li><a href="#saving-the-dataset-as-a-geopackage" id="toc-saving-the-dataset-as-a-geopackage" class="nav-link" data-scroll-target="#saving-the-dataset-as-a-geopackage"><i class="bi-file-arrow-up " style="color: darkblue;" role="img" aria-hidden="true"></i> Saving the dataset as a GeoPackage</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>This workshop will teach you the basics of working with the GeoPandas Python module and automating QGIS processing tools.</p>
<section id="getting-started" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Getting started</h1>
<p>To ensure stability and extended support, it’s recommended to use the latest QGIS Long Term Release. As of now, the current LTR is <strong>QGIS 3.40.x Bratislava</strong>.</p>
<section id="recommended-installation-method" class="level2">
<h2 class="anchored" data-anchor-id="recommended-installation-method"><i class="bi-download " style="color: blue;" role="img" aria-hidden="true"></i> Recommended Installation Method</h2>
<ul>
<li><strong>Standalone Installer (Windows/macOS/Linux)</strong>: <a href="https://qgis.org/en/site/forusers/download.html">Download here</a></li>
</ul>
</section>
<section id="why-the-long-term-release" class="level2">
<h2 class="anchored" data-anchor-id="why-the-long-term-release"><i class="bi-shield-fill-check " style="color: green;" role="img" aria-hidden="true"></i> Why the Long Term Release?</h2>
<p>Opting for the Long Term Release (LTR) offers several benefits:</p>
<ul>
<li><p><strong>Enhanced Stability</strong>:<br>
LTR versions undergo rigorous testing, making them more reliable for production environments.</p></li>
<li><p><strong>Extended Support</strong>:<br>
Receive at least one year of bug fix updates, ensuring ongoing maintenance and security.</p></li>
<li><p><strong>Compatibility Assurance</strong>:<br>
Ideal for organizations and institutions that require a stable platform for their GIS workflows.</p></li>
<li><p><strong>Comprehensive Documentation</strong>:<br>
Benefit from well-documented features and support resources, facilitating easier training and troubleshooting.</p></li>
</ul>
</section>
<section id="if-you-need-more" class="level2">
<h2 class="anchored" data-anchor-id="if-you-need-more"><i class="bi-list-stars " style="color: yellow;" role="img" aria-hidden="true"></i> If you need more…</h2>
<p>While the LTR version prioritizes stability, it may not include the latest features introduced in newer releases. If access to cutting-edge tools and functionalities is essential for your projects, you might consider the latest release. However, for most users, the LTR provides a balanced approach between new features and system reliability.</p>
</section>
<section id="launch-qgis" class="level2">
<h2 class="anchored" data-anchor-id="launch-qgis"><i class="bi-rocket-takeoff " style="color: red;" role="img" aria-hidden="true"></i> Launch QGIS</h2>
<p>Launch the <strong>QGIS Desktop</strong> application on your computer.</p>
</section>
<section id="open-the-python-console" class="level2">
<h2 class="anchored" data-anchor-id="open-the-python-console"><i class="bi-terminal " style="color: grey;" role="img" aria-hidden="true"></i> Open the Python Console</h2>
<ul>
<li><p>In the QGIS main window, go to the top menu bar.</p></li>
<li><p>Click on Plugins → Python Console.</p></li>
<li><p>or you can press <strong>Ctrl + Alt + P</strong> (Windows/Linux) or <strong>Cmd + Alt + P</strong> (Mac) to open the Python Console.</p></li>
</ul>
</section>
<section id="install-geopandas-using-pip" class="level2">
<h2 class="anchored" data-anchor-id="install-geopandas-using-pip"><i class="bi-terminal-plus " style="color: grey;" role="img" aria-hidden="true"></i> Install GeoPandas using <code>pip</code></h2>
<p>First, check if GeoPandas is installed. In the Python Console, type the following command and press Enter:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"GeoPandas is installed."</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">ImportError</span>:</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"GeoPandas is not installed."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If not, you can install GeoPandas using <code>pip</code></p>
<blockquote class="blockquote">
<h3 id="note-what-is-pip" class="anchored">Note: What is <code>pip</code>?</h3>
<p><strong><code>pip</code></strong> is the standard package manager for Python. It allows you to <strong>install, upgrade, and manage Python libraries and packages</strong> from the Python Package Index (PyPI) and other sources.</p>
<p>With <code>pip</code>, you can:</p>
<ul>
<li><strong>Install packages</strong> – e.g.&nbsp;<code>geopandas</code>, <code>numpy</code>, etc., using a command like <code>!pip install geopandas</code>.</li>
<li><strong>Upgrade packages</strong> – keep your libraries up to date.</li>
<li><strong>Uninstall packages</strong> – remove packages you no longer need.</li>
<li><strong>Manage dependencies</strong> – install the libraries that other packages require.</li>
</ul>
<p>QGIS uses its own Python environment, but you can still run <code>pip</code> commands from inside the Python Console.</p>
</blockquote>
<p>In the console, enter the following command:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install geopandas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Just in case, verify if GeoPandas is installed, by typing the following code <strong>one line at a time</strong>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"GeoPandas version:"</span>, gpd.__version__)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="geopandas---basics" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> GeoPandas - basics</h1>
<p><a href="https://geopandas.org">GeoPandas</a> is a powerful Python library that makes working with geospatial data simple and efficient. It’s built on top of the popular <code>pandas</code> library, which is used for data manipulation and analysis in Python. <code>geopandas</code> adds support for spatial data and geometric operations. if you’re familiar with <code>pandas</code>, you will be able to work with geospatial datasets using familiar syntax and tools. If not, <code>geopandas</code> is very easy to learn.</p>
<p>GeoPandas works primarily with a specialized data structure called a <strong>GeoDataFrame</strong>. This is an extension of the standard <code>pandas</code> DataFrame that stores tabular data with rows and columns, but also includes a special <code>geometry</code> column that holds spatial shapes such as points, lines, or polygons. This <code>geometry</code> column enables spatial operations and geographic analyses directly on the dataset. When you read a geospatial dataset with GeoPandas, it is loaded into a GeoDataFrame.</p>
<section id="qgis-python-editor" class="level2">
<h2 class="anchored" data-anchor-id="qgis-python-editor"><i class="bi-pencil-square " style="color: grey;" role="img" aria-hidden="true"></i> QGIS Python Editor</h2>
<p>The Python Editor in QGIS lets you write and run Python scripts to automate tasks and work with geospatial data (using GeoPandas for example). It includes syntax highlighting and an interactive console, used by us already. When you execute scripts in the editor, the console will show you outputs, messages and errors. The editor allows you to save your scripts to disk. Remember to do it frequently to avoid losing your work.</p>
<p>We will read our first dataset using GeoPandas, but first a few words on… <strong>how to start writing and running a Python script in QGIS:</strong></p>
<ol type="1">
<li><p>Go to the menu: <strong>Plugins → Python Console</strong> (or press <code>Ctrl+Alt+P</code>). This opens the Python Console.</p></li>
<li><p>In the Python Console, click the <strong>Show Editor</strong> button to open the Python Editor.</p></li>
<li><p>In the Python Editor, you can write your script. For example, you can paste the GeoPandas code, which follows.</p></li>
<li><p>Save your script with a <code>.py</code> extension using <strong>File → Save As…</strong> (for example, <code>read_nuts.py</code>).</p></li>
<li><p>To run the script, click the <strong>Run Script</strong> button (the green play icon) in the editor toolbar.</p></li>
<li><p>The output and any print statements will appear in the Python Console.</p></li>
</ol>
</section>
<section id="reading-datasets-with-geopandas" class="level2">
<h2 class="anchored" data-anchor-id="reading-datasets-with-geopandas"><i class="bi-file-arrow-up " style="color: darkblue;" role="img" aria-hidden="true"></i> Reading datasets with GeoPandas</h2>
<p>Our adventure with GeoPandas will begin by reading a NUTS layer from Eurostat’s website. Before running the code below, please <a href="https://gisco-services.ec.europa.eu/distribution/v2/nuts/shp/NUTS_RG_20M_2024_3857_LEVL_3.shp.zip"><strong>download the NUTS 2024 Shapefile in ZIP archive</strong></a> from the and extract it into the folder <code>C:\EFGS_Python</code>.</p>
<p>Note that the file is part of the <a href="https://gisco-services.ec.europa.eu/distribution/v2/nuts/shp/">Eurostat GISCO repository</a>. More info (plus easy customization of the download) on the <a href="https://ec.europa.eu/eurostat/web/gisco/geodata/statistical-units/territorial-units-statistics">Eurostat GISCO NUTS website</a>.</p>
<p>Once the files are extracted, add the NUTS layer to the map and answer the following questions:</p>
<ul>
<li>Which NUTS level does the layer represent?</li>
<li>What is the reference year?</li>
<li>What is the reference scale of the data?</li>
<li>What is the coordinate reference system?</li>
</ul>
<p>Click to reveal the answers below:</p>
<div class="callout callout-style-default callout-note callout-titled" title="Answers">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answers
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>NUTS level 3</li>
<li>Reference year 2024</li>
<li>Reference scale 1 : 20 000 000 (20M)</li>
<li>CRS 3857 (aka Web Mercator or Pseudo Mercator)</li>
</ul>
<p>Note: You can read all this from the file name :)</p>
</div>
</div>
</div>
<p>Now that you know a few things about the downloaded dataset, you can read the Shapefile with GeoPandas as follows. Paste the following code snippets to the Python Editor:</p>
<section id="start-with-importing-geopandas" class="level3">
<h3 class="anchored" data-anchor-id="start-with-importing-geopandas">1. Start with importing GeoPandas</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>GeoPandas is usually imported as <code>gpd</code>.</p>
</section>
<section id="specify-the-path-to-the-shapefile" class="level3">
<h3 class="anchored" data-anchor-id="specify-the-path-to-the-shapefile">2. Specify the path to the Shapefile</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Path to the extracted Shapefile</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>shp_path <span class="op">=</span> <span class="vs">r"C:</span><span class="er">\</span><span class="vs">EFGS_Python</span><span class="er">\</span><span class="vs">NUTS_RG_20M_2024_3857_LEVL_3</span><span class="dv">.</span><span class="vs">shp"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here, a string variable <code>shp_path</code> is assigned the full path to a shapefile on your computer.<br>
The prefix <code>r</code> before the string marks it as a <em>raw string</em>, telling Python to treat backslashes (<code>\</code>) as literal characters and not as escape sequences (e.g., <code>\n</code> for newline).</p>
<blockquote class="blockquote">
<h3 id="note-why-store-file-paths-in-a-variable" class="anchored">Note: Why store file paths in a variable?</h3>
<p>Storing file paths in a variable in Python has several advantages:</p>
<ul>
<li><p><strong>Readability</strong>: It makes your code easier to read and understand. Instead of repeating a long file path multiple times, you define it once and refer to the variable.</p></li>
<li><p><strong>Reusability</strong>: You can use the same path in multiple places (e.g.&nbsp;for reading and writing) without duplication.</p></li>
<li><p><strong>Maintainability</strong>: If the path changes, you only need to update it in one place instead of searching through your code for every occurrence.</p></li>
<li><p><strong>Error reduction</strong>: Avoids typos or inconsistencies when using the same path in multiple places.</p></li>
</ul>
<p>In short, using a variable for paths leads to cleaner, safer, and more maintainable code — especially as your script grows or gets reused in different contexts.</p>
</blockquote>
</section>
<section id="read-the-shapefile-into-a-geodataframe" class="level3">
<h3 class="anchored" data-anchor-id="read-the-shapefile-into-a-geodataframe">3. Read the Shapefile into a GeoDataFrame</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>gdf <span class="op">=</span> gpd.read_file(shp_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This line uses GeoPandas’ <code>read_file</code> function to load the shapefile located at <code>shp_path</code> into a GeoDataFrame called <code>gdf</code>.</p>
</section>
<section id="display-first-few-rows" class="level3">
<h3 class="anchored" data-anchor-id="display-first-few-rows">4. Display first few rows</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gdf.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This prints the first few rows of the GeoDataFrame to the console, allowing you to verify if the dataset was loaded correctly and quickly inspect the data’s structure and content.</p>
<p>Where is the data now?</p>
<div class="callout callout-style-default callout-note callout-titled" title="Answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The data was loaded to your computer’s memory, where it is accessible to Python commands.</p>
</div>
</div>
</div>
</section>
</section>
<section id="introducing-the-geopackage" class="level2">
<h2 class="anchored" data-anchor-id="introducing-the-geopackage"><i class="bi-database " style="color: brown;" role="img" aria-hidden="true"></i> Introducing the GeoPackage</h2>
<p>Before we move on, let’s talk about an open geospatial data format: the GeoPackage. It is an open, standards-based, platform-independent, and compact format for storing geospatial data. It uses the file extension <code>.gpkg</code>.</p>
<p>GeoPackage was developed by the Open Geospatial Consortium (OGC). It is designed to efficiently store vector and raster data with related attributes all in a single file using a lightweight SQLite database. GeoPackage supports complex spatial data types and is widely supported by many GIS software applications, making it an excellent choice for sharing and managing spatial data across different platforms without relying on proprietary formats.</p>
</section>
<section id="shapefiles-vs-geopackages" class="level2">
<h2 class="anchored" data-anchor-id="shapefiles-vs-geopackages"><i class="bi-plus-slash-minus " style="color: red;" role="img" aria-hidden="true"></i> Shapefiles vs GeoPackages</h2>
<p>While the Shapefile format is common and widely used, GeoPackage surfaces as an efficient and stable open alternative. Have a look at the comparison of the two formats:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 38%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>Shapefile</th>
<th>GeoPackage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Maintained by</td>
<td>Esri</td>
<td>Open Geospatial Consortium (OGC)</td>
</tr>
<tr class="even">
<td>Format Origin</td>
<td>Introduced in early 1990s</td>
<td>Released as OGC standard in 2014</td>
</tr>
<tr class="odd">
<td>File structure</td>
<td>Multiple files (.shp, .shx, .dbf…)</td>
<td>Single-file SQLite-based container</td>
</tr>
<tr class="even">
<td>Data types</td>
<td>Limited (no support for mixed types)</td>
<td>Supports advanced types &amp; metadata</td>
</tr>
<tr class="odd">
<td>Attribute limits</td>
<td>255 fields, 10 char field names</td>
<td>No such limits</td>
</tr>
<tr class="even">
<td>Maximum dataset size</td>
<td>Typically up to 2 GB per file (due to 4GB file size limit and multiple files required)</td>
<td>Limited by SQLite size, generally up to 140 TB, effectively unlimited for most use cases</td>
</tr>
<tr class="odd">
<td>Performance</td>
<td>Slower for large datasets</td>
<td>Better performance with large data</td>
</tr>
</tbody>
</table>
</section>
<section id="saving-the-dataset-as-a-geopackage" class="level2">
<h2 class="anchored" data-anchor-id="saving-the-dataset-as-a-geopackage"><i class="bi-file-arrow-up " style="color: darkblue;" role="img" aria-hidden="true"></i> Saving the dataset as a GeoPackage</h2>
<p>To save the GeoDataFrame as a GeoPackage, use the following code:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Path for the output GeoPackage</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>gpkg_path <span class="op">=</span> <span class="vs">r"C:</span><span class="er">\</span><span class="vs">EFGS_Python</span><span class="er">\</span><span class="vs">NUTS_RG_20M_2024</span><span class="dv">.</span><span class="vs">gpkg"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<h3 id="note" class="anchored">Note</h3>
<p>Just like when reading a dataset, we stored the path in a variable.</p>
</blockquote>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write GeoDataFrame to GeoPackage</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>gdf.to_file(gpkg_path, driver<span class="op">=</span><span class="st">"GPKG"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<h3 id="note-1" class="anchored">Note</h3>
<p>When writing a GeoPackage, you need to specify the `driver=“GPKG”. The default driver is Shapefile, so when writing a Shapefile with GeoPandas, no driver specification is needed.</p>
</blockquote>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"GeoPackage saved to </span><span class="sc">{</span>gpkg_path<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<h3 id="note-2" class="anchored">Note</h3>
<p>The last line uses an <strong>f-string</strong> (formatted string literal) to print a message that includes the value of the variable <code>gpkg_path</code>.</p>
<ul>
<li><p><strong>What is an f-string?</strong><br>
An f-string is a way to embed expressions inside string literals, using curly braces <code>{}</code>. It was introduced in Python 3.6 and provides a concise and readable way to format strings.</p></li>
<li><p><strong>How does it work here?</strong><br>
The string inside the quotation marks starts with <code>f</code>, signaling Python to evaluate any expression inside <code>{}</code>. In this case, <code>{gpkg_path}</code> is replaced with the actual value stored in the variable <code>gpkg_path</code> when the print statement runs.</p></li>
<li><p><strong>Advantages of using f-strings with variables of different types:</strong></p>
<ul>
<li><p><strong>Readability:</strong> The syntax is clean and intuitive, making the code easier to understand.</p></li>
<li><p><strong>Type flexibility:</strong> You can embed variables of any data type (strings, numbers, objects with string representations, etc.) without needing to manually convert them. Python automatically converts the value inside <code>{}</code> to a string.</p></li>
<li><p><strong>Performance:</strong> f-strings are generally faster than older methods like string concatenation or <code>str.format()</code>.</p></li>
<li><p><strong>Maintainability:</strong> Embedding variables directly in the string reduces errors related to string formatting and concatenation.</p></li>
</ul></li>
</ul>
</blockquote>
<p>After executing the code, please check if the GeoPackage was saved correctly on disk.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>